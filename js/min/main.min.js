"use strict";function _typeof(t){"@babel/helpers - typeof";return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t("object"===("undefined"==typeof exports?"undefined":_typeof(exports))?require("jquery"):jQuery)}(function(t){function e(t,e){return t.toFixed(e.decimals)}var n=function e(n,o){this.$element=t(n),this.options=t.extend({},e.DEFAULTS,this.dataOptions(),o),this.init()};n.DEFAULTS={from:0,to:0,speed:1e3,refreshInterval:100,decimals:0,formatter:e,onUpdate:null,onComplete:null},n.prototype.init=function(){this.value=this.options.from,this.loops=Math.ceil(this.options.speed/this.options.refreshInterval),this.loopCount=0,this.increment=(this.options.to-this.options.from)/this.loops},n.prototype.dataOptions=function(){var t={from:this.$element.data("from"),to:this.$element.data("to"),speed:this.$element.data("speed"),refreshInterval:this.$element.data("refresh-interval"),decimals:this.$element.data("decimals")},e=Object.keys(t);for(var n in e){var o=e[n];void 0===t[o]&&delete t[o]}return t},n.prototype.update=function(){this.value+=this.increment,this.loopCount++,this.render(),"function"==typeof this.options.onUpdate&&this.options.onUpdate.call(this.$element,this.value),this.loopCount>=this.loops&&(clearInterval(this.interval),this.value=this.options.to,"function"==typeof this.options.onComplete&&this.options.onComplete.call(this.$element,this.value))},n.prototype.render=function(){var t=this.options.formatter.call(this.$element,this.value,this.options);this.$element.text(t)},n.prototype.restart=function(){this.stop(),this.init(),this.start()},n.prototype.start=function(){this.stop(),this.render(),this.interval=setInterval(this.update.bind(this),this.options.refreshInterval)},n.prototype.stop=function(){this.interval&&clearInterval(this.interval)},n.prototype.toggle=function(){this.interval?this.stop():this.start()},t.fn.countTo=function(e){return this.each(function(){var o=t(this),i=o.data("countTo"),r=!i||"object"===_typeof(e),s="object"===_typeof(e)?e:{},a="string"==typeof e?e:"start";r&&(i&&i.stop(),o.data("countTo",i=new n(this,s))),i[a].call(i)})}}),function(t,e,n,o){var i=t(e);t.fn.lazyload=function(r){function s(){var e=0;l.each(function(){var n=t(this);if(!c.skip_invisible||n.is(":visible"))if(t.abovethetop(this,c)||t.leftofbegin(this,c));else if(t.belowthefold(this,c)||t.rightoffold(this,c)){if(++e>c.failure_limit)return!1}else n.trigger("appear"),e=0})}var a,l=this,c={threshold:0,failure_limit:0,event:"scroll",effect:"show",container:e,data_attribute:"original",skip_invisible:!0,appear:null,load:null,placeholder:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC"};return r&&(o!==r.failurelimit&&(r.failure_limit=r.failurelimit,delete r.failurelimit),o!==r.effectspeed&&(r.effect_speed=r.effectspeed,delete r.effectspeed),t.extend(c,r)),a=c.container===o||c.container===e?i:t(c.container),0===c.event.indexOf("scroll")&&a.bind(c.event,function(){return s()}),this.each(function(){var e=this,n=t(e);e.loaded=!1,(n.attr("src")===o||!1===n.attr("src"))&&n.is("img")&&n.attr("src",c.placeholder),n.one("appear",function(){if(!this.loaded){if(c.appear){var o=l.length;c.appear.call(e,o,c)}t("<img />").bind("load",function(){var o=n.attr("data-"+c.data_attribute);n.hide(),n.is("img")?n.attr("src",o):n.css("background-image","url('"+o+"')"),n[c.effect](c.effect_speed),e.loaded=!0;var i=t.grep(l,function(t){return!t.loaded});if(l=t(i),c.load){var r=l.length;c.load.call(e,r,c)}}).attr("src",n.attr("data-"+c.data_attribute))}}),0!==c.event.indexOf("scroll")&&n.bind(c.event,function(){e.loaded||n.trigger("appear")})}),i.bind("resize",function(){s()}),/(?:iphone|ipod|ipad).*os 5/gi.test(navigator.appVersion)&&i.bind("pageshow",function(e){e.originalEvent&&e.originalEvent.persisted&&l.each(function(){t(this).trigger("appear")})}),t(n).ready(function(){s()}),this},t.belowthefold=function(n,r){return(r.container===o||r.container===e?(e.innerHeight?e.innerHeight:i.height())+i.scrollTop():t(r.container).offset().top+t(r.container).height())<=t(n).offset().top-r.threshold},t.rightoffold=function(n,r){return(r.container===o||r.container===e?i.width()+i.scrollLeft():t(r.container).offset().left+t(r.container).width())<=t(n).offset().left-r.threshold},t.abovethetop=function(n,r){return(r.container===o||r.container===e?i.scrollTop():t(r.container).offset().top)>=t(n).offset().top+r.threshold+t(n).height()},t.leftofbegin=function(n,r){return(r.container===o||r.container===e?i.scrollLeft():t(r.container).offset().left)>=t(n).offset().left+r.threshold+t(n).width()},t.inviewport=function(e,n){return!(t.rightoffold(e,n)||t.leftofbegin(e,n)||t.belowthefold(e,n)||t.abovethetop(e,n))},t.extend(t.expr[":"],{"below-the-fold":function(e){return t.belowthefold(e,{threshold:0})},"above-the-top":function(e){return!t.belowthefold(e,{threshold:0})},"right-of-screen":function(e){return t.rightoffold(e,{threshold:0})},"left-of-screen":function(e){return!t.rightoffold(e,{threshold:0})},"in-viewport":function(e){return t.inviewport(e,{threshold:0})},"above-the-fold":function(e){return!t.belowthefold(e,{threshold:0})},"right-of-fold":function(e){return t.rightoffold(e,{threshold:0})},"left-of-fold":function(e){return!t.rightoffold(e,{threshold:0})}})}(jQuery,window,document),document.addEventListener("DOMContentLoaded",function(t){var e=[].slice.call(document.querySelectorAll(".lazy > source"));if("IntersectionObserver"in window&&"IntersectionObserverEntry"in window){var n=new IntersectionObserver(function(t,e){t.forEach(function(t){if(t.isIntersecting){var e=t.target;e.srcset=e.dataset.srcset,e.nextElementSibling.srcset=e.dataset.srcset,e.nextElementSibling.classList.add("fade-in"),e.parentElement.classList.remove("lazy"),n.unobserve(e)}})});e.forEach(function(t){n.observe(t)})}else{var o=!1,i=function t(){!1===o&&(o=!0,setTimeout(function(){e.forEach(function(n){n.getBoundingClientRect().top<=window.innerHeight&&n.getBoundingClientRect().bottom>=0&&"none"!==getComputedStyle(n).display&&(n.srcset=n.dataset.srcset,n.nextElementSibling.src=n.dataset.srcset,n.nextElementSibling.classList.add("fade-in"),n.parentElement.classList.remove("lazy"),0===(e=e.filter(function(t){return t!==n})).length&&(document.removeEventListener("scroll",t),window.removeEventListener("resize",t),window.removeEventListener("orientationchange",t)))}),o=!1},200))};document.addEventListener("scroll",i),window.addEventListener("resize",i),window.addEventListener("orientationchange",i)}}),document.addEventListener("DOMContentLoaded",function(t){var e=[].slice.call(document.querySelectorAll(".lazy > source"));if("IntersectionObserver"in window&&"IntersectionObserverEntry"in window){var n=new IntersectionObserver(function(t,e){t.forEach(function(t){if(t.isIntersecting){var e=t.target;e.srcset=e.dataset.srcset,e.nextElementSibling.srcset=e.dataset.srcset,e.nextElementSibling.classList.add("fade-in"),e.parentElement.classList.remove("lazy"),n.unobserve(e)}})});e.forEach(function(t){n.observe(t)})}else{var o=!1,i=function t(){!1===o&&(o=!0,setTimeout(function(){e.forEach(function(n){n.getBoundingClientRect().top<=window.innerHeight&&n.getBoundingClientRect().bottom>=0&&"none"!==getComputedStyle(n).display&&(n.srcset=n.dataset.srcset,n.nextElementSibling.src=n.dataset.srcset,n.nextElementSibling.classList.add("fade-in"),n.parentElement.classList.remove("lazy"),0===(e=e.filter(function(t){return t!==n})).length&&(document.removeEventListener("scroll",t),window.removeEventListener("resize",t),window.removeEventListener("orientationchange",t)))}),o=!1},200))};document.addEventListener("scroll",i),window.addEventListener("resize",i),window.addEventListener("orientationchange",i)}}),$(".js-hamburger").click(function(){$("body").toggleClass("is-open"),$("body").toggleClass("no-scroll")}),$(".navigation__drop-btn > span").click(function(){$(window).width()<992&&$(this).parent().toggleClass("drop-is-open")}),$(window).bind("load",function(){$(".navigation__list li a").click(function(){$("body").hasClass("is-open no-scroll")&&$(".js-hamburger").click()})}),$(document).ready(function(){var t;if("IntersectionObserver"in window){t=document.querySelectorAll(".lazy");var e=new IntersectionObserver(function(t,n){t.forEach(function(t){if(t.isIntersecting){var n=t.target;n.src=n.dataset.src,n.classList.remove("lazy"),e.unobserve(n)}})});t.forEach(function(t){e.observe(t)})}else{var n,o=function(){n&&clearTimeout(n),n=setTimeout(function(){var e=$(window).scrollTop();t.each(function(){var n=$(this);if(n.offset().top-e<window.innerHeight){var o=n.attr("data-src");n.attr("src",o),n.removeClass("lazy"),t=$(".lazy")}}),0==t.length&&($(document).off("scroll"),$(window).off("resize"))},20)};t=$(".lazy"),$(document).on("scroll",o),$(window).on("resize",o)}});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsiZmFjdG9yeSIsImRlZmluZSIsImFtZCIsImV4cG9ydHMiLCJfdHlwZW9mIiwicmVxdWlyZSIsImpRdWVyeSIsIiQiLCJmb3JtYXR0ZXIiLCJ2YWx1ZSIsIm9wdGlvbnMiLCJ0b0ZpeGVkIiwiZGVjaW1hbHMiLCJDb3VudFRvIiwiZWxlbWVudCIsInRoaXMiLCIkZWxlbWVudCIsImV4dGVuZCIsIkRFRkFVTFRTIiwiZGF0YU9wdGlvbnMiLCJpbml0IiwiZnJvbSIsInRvIiwic3BlZWQiLCJyZWZyZXNoSW50ZXJ2YWwiLCJvblVwZGF0ZSIsIm9uQ29tcGxldGUiLCJwcm90b3R5cGUiLCJsb29wcyIsIk1hdGgiLCJjZWlsIiwibG9vcENvdW50IiwiaW5jcmVtZW50IiwiZGF0YSIsImtleXMiLCJPYmplY3QiLCJpIiwia2V5IiwidXBkYXRlIiwicmVuZGVyIiwiY2FsbCIsImNsZWFySW50ZXJ2YWwiLCJpbnRlcnZhbCIsImZvcm1hdHRlZFZhbHVlIiwidGV4dCIsInJlc3RhcnQiLCJzdG9wIiwic3RhcnQiLCJzZXRJbnRlcnZhbCIsImJpbmQiLCJ0b2dnbGUiLCJmbiIsImNvdW50VG8iLCJvcHRpb24iLCJlYWNoIiwiJHRoaXMiLCJtZXRob2QiLCJhIiwiYiIsImMiLCJkIiwiZSIsImxhenlsb2FkIiwiZiIsImciLCJqIiwic2tpcF9pbnZpc2libGUiLCJpcyIsImFib3ZldGhldG9wIiwibGVmdG9mYmVnaW4iLCJiZWxvd3RoZWZvbGQiLCJyaWdodG9mZm9sZCIsImZhaWx1cmVfbGltaXQiLCJ0cmlnZ2VyIiwiaCIsInRocmVzaG9sZCIsImV2ZW50IiwiZWZmZWN0IiwiY29udGFpbmVyIiwiZGF0YV9hdHRyaWJ1dGUiLCJhcHBlYXIiLCJsb2FkIiwicGxhY2Vob2xkZXIiLCJmYWlsdXJlbGltaXQiLCJlZmZlY3RzcGVlZCIsImVmZmVjdF9zcGVlZCIsImluZGV4T2YiLCJsb2FkZWQiLCJhdHRyIiwib25lIiwibGVuZ3RoIiwiaGlkZSIsImNzcyIsImdyZXAiLCJ0ZXN0IiwibmF2aWdhdG9yIiwiYXBwVmVyc2lvbiIsIm9yaWdpbmFsRXZlbnQiLCJwZXJzaXN0ZWQiLCJyZWFkeSIsImlubmVySGVpZ2h0IiwiaGVpZ2h0Iiwic2Nyb2xsVG9wIiwib2Zmc2V0IiwidG9wIiwid2lkdGgiLCJzY3JvbGxMZWZ0IiwibGVmdCIsImludmlld3BvcnQiLCJleHByIiwiYmVsb3ctdGhlLWZvbGQiLCJhYm92ZS10aGUtdG9wIiwicmlnaHQtb2Ytc2NyZWVuIiwibGVmdC1vZi1zY3JlZW4iLCJpbi12aWV3cG9ydCIsImFib3ZlLXRoZS1mb2xkIiwicmlnaHQtb2YtZm9sZCIsImxlZnQtb2YtZm9sZCIsIndpbmRvdyIsImRvY3VtZW50IiwiYWRkRXZlbnRMaXN0ZW5lciIsInNsaWNlIiwicXVlcnlTZWxlY3RvckFsbCIsIkludGVyc2VjdGlvbk9ic2VydmVyIiwiZm9yRWFjaCIsImlzSW50ZXJzZWN0aW5nIiwidGFyZ2V0Iiwic3Jjc2V0IiwiZGF0YXNldCIsIm5leHRFbGVtZW50U2libGluZyIsImNsYXNzTGlzdCIsImFkZCIsInBhcmVudEVsZW1lbnQiLCJyZW1vdmUiLCJ1bm9ic2VydmUiLCJvYnNlcnZlIiwic2V0VGltZW91dCIsImdldEJvdW5kaW5nQ2xpZW50UmVjdCIsImJvdHRvbSIsImdldENvbXB1dGVkU3R5bGUiLCJkaXNwbGF5Iiwic3JjIiwiZmlsdGVyIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsInQiLCJuIiwicyIsImNsaWNrIiwidG9nZ2xlQ2xhc3MiLCJwYXJlbnQiLCJoYXNDbGFzcyIsImxhenlsb2FkSW1hZ2VzIiwiaW1hZ2VPYnNlcnZlciIsImVudHJpZXMiLCJvYnNlcnZlciIsImVudHJ5IiwiaW1hZ2UiLCJsYXp5bG9hZFRocm90dGxlVGltZW91dCIsImNsZWFyVGltZW91dCIsImVsIiwidXJsIiwicmVtb3ZlQ2xhc3MiLCJvZmYiLCJvbiJdLCJtYXBwaW5ncyI6InlSQUNDLFNBQVVBLEdBQ2Usa0JBQVhDLFNBQXlC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QUFHdkUsS0FBSyxNQUFPd0UsR0FDZkQsRUFBR0UsWUFBWSxRQUNmVixFQUFpQmhKLEVBQUUsWUFHQyxHQUF6QmdKLEVBQWU3RCxTQUNkbkYsRUFBRWdILFVBQVUyQyxJQUFJLFVBQ2hCM0osRUFBRStHLFFBQVE0QyxJQUFJLFlBRW5CLElBdEJQWCxHQUFpQmhKLEVBQUUsU0F5Qm5CQSxFQUFFZ0gsVUFBVTRDLEdBQUcsU0FBVXJHLEdBQ3pCdkQsRUFBRStHLFFBQVE2QyxHQUFHLFNBQVVyRyIsImZpbGUiOiJqcy9taW4vbWFpbi5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJcclxuKGZ1bmN0aW9uIChmYWN0b3J5KSB7XHJcbiAgICBpZiAodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKSB7XHJcbiAgICAgICAgLy8gQU1EXHJcbiAgICAgICAgZGVmaW5lKFsnanF1ZXJ5J10sIGZhY3RvcnkpO1xyXG4gICAgfSBlbHNlIGlmICh0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcpIHtcclxuICAgICAgICAvLyBDb21tb25KU1xyXG4gICAgICAgIGZhY3RvcnkocmVxdWlyZSgnanF1ZXJ5JykpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICAvLyBCcm93c2VyIGdsb2JhbHNcclxuICAgICAgICBmYWN0b3J5KGpRdWVyeSk7XHJcbiAgICB9XHJcbn0oZnVuY3Rpb24gKCQpIHtcclxuICAgIHZhciBDb3VudFRvID0gZnVuY3Rpb24gKGVsZW1lbnQsIG9wdGlvbnMpIHtcclxuICAgICAgICB0aGlzLiRlbGVtZW50ID0gJChlbGVtZW50KTtcclxuICAgICAgICB0aGlzLm9wdGlvbnMgID0gJC5leHRlbmQoe30sIENvdW50VG8uREVGQVVMVFMsIHRoaXMuZGF0YU9wdGlvbnMoKSwgb3B0aW9ucyk7XHJcbiAgICAgICAgdGhpcy5pbml0KCk7XHJcbiAgICB9O1xyXG5cclxuICAgIENvdW50VG8uREVGQVVMVFMgPSB7XHJcbiAgICAgICAgZnJvbTogMCwgICAgICAgICAgICAgICAvLyB0aGUgbnVtYmVyIHRoZSBlbGVtZW50IHNob3VsZCBzdGFydCBhdFxyXG4gICAgICAgIHRvOiAwLCAgICAgICAgICAgICAgICAgLy8gdGhlIG51bWJlciB0aGUgZWxlbWVudCBzaG91bGQgZW5kIGF0XHJcbiAgICAgICAgc3BlZWQ6IDEwMDAsICAgICAgICAgICAvLyBob3cgbG9uZyBpdCBzaG91bGQgdGFrZSB0byBjb3VudCBiZXR3ZWVuIHRoZSB0YXJnZXQgbnVtYmVyc1xyXG4gICAgICAgIHJlZnJlc2hJbnRlcnZhbDogMTAwLCAgLy8gaG93IG9mdGVuIHRoZSBlbGVtZW50IHNob3VsZCBiZSB1cGRhdGVkXHJcbiAgICAgICAgZGVjaW1hbHM6IDAsICAgICAgICAgICAvLyB0aGUgbnVtYmVyIG9mIGRlY2ltYWwgcGxhY2VzIHRvIHNob3dcclxuICAgICAgICBmb3JtYXR0ZXI6IGZvcm1hdHRlciwgIC8vIGhhbmRsZXIgZm9yIGZvcm1hdHRpbmcgdGhlIHZhbHVlIGJlZm9yZSByZW5kZXJpbmdcclxuICAgICAgICBvblVwZGF0ZTogbnVsbCwgICAgICAgIC8vIGNhbGxiYWNrIG1ldGhvZCBmb3IgZXZlcnkgdGltZSB0aGUgZWxlbWVudCBpcyB1cGRhdGVkXHJcbiAgICAgICAgb25Db21wbGV0ZTogbnVsbCAgICAgICAvLyBjYWxsYmFjayBtZXRob2QgZm9yIHdoZW4gdGhlIGVsZW1lbnQgZmluaXNoZXMgdXBkYXRpbmdcclxuICAgIH07XHJcblxyXG4gICAgQ291bnRUby5wcm90b3R5cGUuaW5pdCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLnZhbHVlICAgICA9IHRoaXMub3B0aW9ucy5mcm9tO1xyXG4gICAgICAgIHRoaXMubG9vcHMgICAgID0gTWF0aC5jZWlsKHRoaXMub3B0aW9ucy5zcGVlZCAvIHRoaXMub3B0aW9ucy5yZWZyZXNoSW50ZXJ2YWwpO1xyXG4gICAgICAgIHRoaXMubG9vcENvdW50ID0gMDtcclxuICAgICAgICB0aGlzLmluY3JlbWVudCA9ICh0aGlzLm9wdGlvbnMudG8gLSB0aGlzLm9wdGlvbnMuZnJvbSkgLyB0aGlzLmxvb3BzO1xyXG4gICAgfTtcclxuXHJcbiAgICBDb3VudFRvLnByb3RvdHlwZS5kYXRhT3B0aW9ucyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgb3B0aW9ucyA9IHtcclxuICAgICAgICAgICAgZnJvbTogICAgICAgICAgICB0aGlzLiRlbGVtZW50LmRhdGEoJ2Zyb20nKSxcclxuICAgICAgICAgICAgdG86ICAgICAgICAgICAgICB0aGlzLiRlbGVtZW50LmRhdGEoJ3RvJyksXHJcbiAgICAgICAgICAgIHNwZWVkOiAgICAgICAgICAgdGhpcy4kZWxlbWVudC5kYXRhKCdzcGVlZCcpLFxyXG4gICAgICAgICAgICByZWZyZXNoSW50ZXJ2YWw6IHRoaXMuJGVsZW1lbnQuZGF0YSgncmVmcmVzaC1pbnRlcnZhbCcpLFxyXG4gICAgICAgICAgICBkZWNpbWFsczogICAgICAgIHRoaXMuJGVsZW1lbnQuZGF0YSgnZGVjaW1hbHMnKVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHZhciBrZXlzID0gT2JqZWN0LmtleXMob3B0aW9ucyk7XHJcblxyXG4gICAgICAgIGZvciAodmFyIGkgaW4ga2V5cykge1xyXG4gICAgICAgICAgICB2YXIga2V5ID0ga2V5c1tpXTtcclxuXHJcbiAgICAgICAgICAgIGlmICh0eXBlb2Yob3B0aW9uc1trZXldKSA9PT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICAgICAgICAgIGRlbGV0ZSBvcHRpb25zW2tleV07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBvcHRpb25zO1xyXG4gICAgfTtcclxuXHJcbiAgICBDb3VudFRvLnByb3RvdHlwZS51cGRhdGUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy52YWx1ZSArPSB0aGlzLmluY3JlbWVudDtcclxuICAgICAgICB0aGlzLmxvb3BDb3VudCsrO1xyXG5cclxuICAgICAgICB0aGlzLnJlbmRlcigpO1xyXG5cclxuICAgICAgICBpZiAodHlwZW9mKHRoaXMub3B0aW9ucy5vblVwZGF0ZSkgPT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgICAgICB0aGlzLm9wdGlvbnMub25VcGRhdGUuY2FsbCh0aGlzLiRlbGVtZW50LCB0aGlzLnZhbHVlKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmxvb3BDb3VudCA+PSB0aGlzLmxvb3BzKSB7XHJcbiAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy5pbnRlcnZhbCk7XHJcbiAgICAgICAgICAgIHRoaXMudmFsdWUgPSB0aGlzLm9wdGlvbnMudG87XHJcblxyXG4gICAgICAgICAgICBpZiAodHlwZW9mKHRoaXMub3B0aW9ucy5vbkNvbXBsZXRlKSA9PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm9wdGlvbnMub25Db21wbGV0ZS5jYWxsKHRoaXMuJGVsZW1lbnQsIHRoaXMudmFsdWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICBDb3VudFRvLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGZvcm1hdHRlZFZhbHVlID0gdGhpcy5vcHRpb25zLmZvcm1hdHRlci5jYWxsKHRoaXMuJGVsZW1lbnQsIHRoaXMudmFsdWUsIHRoaXMub3B0aW9ucyk7XHJcbiAgICAgICAgdGhpcy4kZWxlbWVudC50ZXh0KGZvcm1hdHRlZFZhbHVlKTtcclxuICAgIH07XHJcblxyXG4gICAgQ291bnRUby5wcm90b3R5cGUucmVzdGFydCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLnN0b3AoKTtcclxuICAgICAgICB0aGlzLmluaXQoKTtcclxuICAgICAgICB0aGlzLnN0YXJ0KCk7XHJcbiAgICB9O1xyXG5cclxuICAgIENvdW50VG8ucHJvdG90eXBlLnN0YXJ0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMuc3RvcCgpO1xyXG4gICAgICAgIHRoaXMucmVuZGVyKCk7XHJcbiAgICAgICAgdGhpcy5pbnRlcnZhbCA9IHNldEludGVydmFsKHRoaXMudXBkYXRlLmJpbmQodGhpcyksIHRoaXMub3B0aW9ucy5yZWZyZXNoSW50ZXJ2YWwpO1xyXG4gICAgfTtcclxuXHJcbiAgICBDb3VudFRvLnByb3RvdHlwZS5zdG9wID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmICh0aGlzLmludGVydmFsKSB7XHJcbiAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy5pbnRlcnZhbCk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICBDb3VudFRvLnByb3RvdHlwZS50b2dnbGUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuaW50ZXJ2YWwpIHtcclxuICAgICAgICAgICAgdGhpcy5zdG9wKCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5zdGFydCgpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgZnVuY3Rpb24gZm9ybWF0dGVyKHZhbHVlLCBvcHRpb25zKSB7XHJcbiAgICAgICAgcmV0dXJuIHZhbHVlLnRvRml4ZWQob3B0aW9ucy5kZWNpbWFscyk7XHJcbiAgICB9XHJcblxyXG4gICAgJC5mbi5jb3VudFRvID0gZnVuY3Rpb24gKG9wdGlvbikge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgJHRoaXMgICA9ICQodGhpcyk7XHJcbiAgICAgICAgICAgIHZhciBkYXRhICAgID0gJHRoaXMuZGF0YSgnY291bnRUbycpO1xyXG4gICAgICAgICAgICB2YXIgaW5pdCAgICA9ICFkYXRhIHx8IHR5cGVvZihvcHRpb24pID09PSAnb2JqZWN0JztcclxuICAgICAgICAgICAgdmFyIG9wdGlvbnMgPSB0eXBlb2Yob3B0aW9uKSA9PT0gJ29iamVjdCcgPyBvcHRpb24gOiB7fTtcclxuICAgICAgICAgICAgdmFyIG1ldGhvZCAgPSB0eXBlb2Yob3B0aW9uKSA9PT0gJ3N0cmluZycgPyBvcHRpb24gOiAnc3RhcnQnO1xyXG5cclxuICAgICAgICAgICAgaWYgKGluaXQpIHtcclxuICAgICAgICAgICAgICAgIGlmIChkYXRhKSBkYXRhLnN0b3AoKTtcclxuICAgICAgICAgICAgICAgICR0aGlzLmRhdGEoJ2NvdW50VG8nLCBkYXRhID0gbmV3IENvdW50VG8odGhpcywgb3B0aW9ucykpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBkYXRhW21ldGhvZF0uY2FsbChkYXRhKTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbn0pKTtcbiFmdW5jdGlvbihhLGIsYyxkKXt2YXIgZT1hKGIpO2EuZm4ubGF6eWxvYWQ9ZnVuY3Rpb24oZil7ZnVuY3Rpb24gZygpe3ZhciBiPTA7aS5lYWNoKGZ1bmN0aW9uKCl7dmFyIGM9YSh0aGlzKTtpZighai5za2lwX2ludmlzaWJsZXx8Yy5pcyhcIjp2aXNpYmxlXCIpKWlmKGEuYWJvdmV0aGV0b3AodGhpcyxqKXx8YS5sZWZ0b2ZiZWdpbih0aGlzLGopKTtlbHNlIGlmKGEuYmVsb3d0aGVmb2xkKHRoaXMsail8fGEucmlnaHRvZmZvbGQodGhpcyxqKSl7aWYoKytiPmouZmFpbHVyZV9saW1pdClyZXR1cm4hMX1lbHNlIGMudHJpZ2dlcihcImFwcGVhclwiKSxiPTB9KX12YXIgaCxpPXRoaXMsaj17dGhyZXNob2xkOjAsZmFpbHVyZV9saW1pdDowLGV2ZW50Olwic2Nyb2xsXCIsZWZmZWN0Olwic2hvd1wiLGNvbnRhaW5lcjpiLGRhdGFfYXR0cmlidXRlOlwib3JpZ2luYWxcIixza2lwX2ludmlzaWJsZTohMCxhcHBlYXI6bnVsbCxsb2FkOm51bGwscGxhY2Vob2xkZXI6XCJkYXRhOmltYWdlL3BuZztiYXNlNjQsaVZCT1J3MEtHZ29BQUFBTlNVaEVVZ0FBQUFFQUFBQUJDQVlBQUFBZkZjU0pBQUFBQVhOU1IwSUFyczRjNlFBQUFBUm5RVTFCQUFDeGp3djhZUVVBQUFBSmNFaFpjd0FBRHNRQUFBN0VBWlVyRGhzQUFBQU5TVVJCVkJoWFl6aDgrUEIvQUFmZkEwbk5QdUNMQUFBQUFFbEZUa1N1UW1DQ1wifTtyZXR1cm4gZiYmKGQhPT1mLmZhaWx1cmVsaW1pdCYmKGYuZmFpbHVyZV9saW1pdD1mLmZhaWx1cmVsaW1pdCxkZWxldGUgZi5mYWlsdXJlbGltaXQpLGQhPT1mLmVmZmVjdHNwZWVkJiYoZi5lZmZlY3Rfc3BlZWQ9Zi5lZmZlY3RzcGVlZCxkZWxldGUgZi5lZmZlY3RzcGVlZCksYS5leHRlbmQoaixmKSksaD1qLmNvbnRhaW5lcj09PWR8fGouY29udGFpbmVyPT09Yj9lOmEoai5jb250YWluZXIpLDA9PT1qLmV2ZW50LmluZGV4T2YoXCJzY3JvbGxcIikmJmguYmluZChqLmV2ZW50LGZ1bmN0aW9uKCl7cmV0dXJuIGcoKX0pLHRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciBiPXRoaXMsYz1hKGIpO2IubG9hZGVkPSExLChjLmF0dHIoXCJzcmNcIik9PT1kfHxjLmF0dHIoXCJzcmNcIik9PT0hMSkmJmMuaXMoXCJpbWdcIikmJmMuYXR0cihcInNyY1wiLGoucGxhY2Vob2xkZXIpLGMub25lKFwiYXBwZWFyXCIsZnVuY3Rpb24oKXtpZighdGhpcy5sb2FkZWQpe2lmKGouYXBwZWFyKXt2YXIgZD1pLmxlbmd0aDtqLmFwcGVhci5jYWxsKGIsZCxqKX1hKFwiPGltZyAvPlwiKS5iaW5kKFwibG9hZFwiLGZ1bmN0aW9uKCl7dmFyIGQ9Yy5hdHRyKFwiZGF0YS1cIitqLmRhdGFfYXR0cmlidXRlKTtjLmhpZGUoKSxjLmlzKFwiaW1nXCIpP2MuYXR0cihcInNyY1wiLGQpOmMuY3NzKFwiYmFja2dyb3VuZC1pbWFnZVwiLFwidXJsKCdcIitkK1wiJylcIiksY1tqLmVmZmVjdF0oai5lZmZlY3Rfc3BlZWQpLGIubG9hZGVkPSEwO3ZhciBlPWEuZ3JlcChpLGZ1bmN0aW9uKGEpe3JldHVybiFhLmxvYWRlZH0pO2lmKGk9YShlKSxqLmxvYWQpe3ZhciBmPWkubGVuZ3RoO2oubG9hZC5jYWxsKGIsZixqKX19KS5hdHRyKFwic3JjXCIsYy5hdHRyKFwiZGF0YS1cIitqLmRhdGFfYXR0cmlidXRlKSl9fSksMCE9PWouZXZlbnQuaW5kZXhPZihcInNjcm9sbFwiKSYmYy5iaW5kKGouZXZlbnQsZnVuY3Rpb24oKXtiLmxvYWRlZHx8Yy50cmlnZ2VyKFwiYXBwZWFyXCIpfSl9KSxlLmJpbmQoXCJyZXNpemVcIixmdW5jdGlvbigpe2coKX0pLC8oPzppcGhvbmV8aXBvZHxpcGFkKS4qb3MgNS9naS50ZXN0KG5hdmlnYXRvci5hcHBWZXJzaW9uKSYmZS5iaW5kKFwicGFnZXNob3dcIixmdW5jdGlvbihiKXtiLm9yaWdpbmFsRXZlbnQmJmIub3JpZ2luYWxFdmVudC5wZXJzaXN0ZWQmJmkuZWFjaChmdW5jdGlvbigpe2EodGhpcykudHJpZ2dlcihcImFwcGVhclwiKX0pfSksYShjKS5yZWFkeShmdW5jdGlvbigpe2coKX0pLHRoaXN9LGEuYmVsb3d0aGVmb2xkPWZ1bmN0aW9uKGMsZil7dmFyIGc7cmV0dXJuIGc9Zi5jb250YWluZXI9PT1kfHxmLmNvbnRhaW5lcj09PWI/KGIuaW5uZXJIZWlnaHQ/Yi5pbm5lckhlaWdodDplLmhlaWdodCgpKStlLnNjcm9sbFRvcCgpOmEoZi5jb250YWluZXIpLm9mZnNldCgpLnRvcCthKGYuY29udGFpbmVyKS5oZWlnaHQoKSxnPD1hKGMpLm9mZnNldCgpLnRvcC1mLnRocmVzaG9sZH0sYS5yaWdodG9mZm9sZD1mdW5jdGlvbihjLGYpe3ZhciBnO3JldHVybiBnPWYuY29udGFpbmVyPT09ZHx8Zi5jb250YWluZXI9PT1iP2Uud2lkdGgoKStlLnNjcm9sbExlZnQoKTphKGYuY29udGFpbmVyKS5vZmZzZXQoKS5sZWZ0K2EoZi5jb250YWluZXIpLndpZHRoKCksZzw9YShjKS5vZmZzZXQoKS5sZWZ0LWYudGhyZXNob2xkfSxhLmFib3ZldGhldG9wPWZ1bmN0aW9uKGMsZil7dmFyIGc7cmV0dXJuIGc9Zi5jb250YWluZXI9PT1kfHxmLmNvbnRhaW5lcj09PWI/ZS5zY3JvbGxUb3AoKTphKGYuY29udGFpbmVyKS5vZmZzZXQoKS50b3AsZz49YShjKS5vZmZzZXQoKS50b3ArZi50aHJlc2hvbGQrYShjKS5oZWlnaHQoKX0sYS5sZWZ0b2ZiZWdpbj1mdW5jdGlvbihjLGYpe3ZhciBnO3JldHVybiBnPWYuY29udGFpbmVyPT09ZHx8Zi5jb250YWluZXI9PT1iP2Uuc2Nyb2xsTGVmdCgpOmEoZi5jb250YWluZXIpLm9mZnNldCgpLmxlZnQsZz49YShjKS5vZmZzZXQoKS5sZWZ0K2YudGhyZXNob2xkK2EoYykud2lkdGgoKX0sYS5pbnZpZXdwb3J0PWZ1bmN0aW9uKGIsYyl7cmV0dXJuIShhLnJpZ2h0b2Zmb2xkKGIsYyl8fGEubGVmdG9mYmVnaW4oYixjKXx8YS5iZWxvd3RoZWZvbGQoYixjKXx8YS5hYm92ZXRoZXRvcChiLGMpKX0sYS5leHRlbmQoYS5leHByW1wiOlwiXSx7XCJiZWxvdy10aGUtZm9sZFwiOmZ1bmN0aW9uKGIpe3JldHVybiBhLmJlbG93dGhlZm9sZChiLHt0aHJlc2hvbGQ6MH0pfSxcImFib3ZlLXRoZS10b3BcIjpmdW5jdGlvbihiKXtyZXR1cm4hYS5iZWxvd3RoZWZvbGQoYix7dGhyZXNob2xkOjB9KX0sXCJyaWdodC1vZi1zY3JlZW5cIjpmdW5jdGlvbihiKXtyZXR1cm4gYS5yaWdodG9mZm9sZChiLHt0aHJlc2hvbGQ6MH0pfSxcImxlZnQtb2Ytc2NyZWVuXCI6ZnVuY3Rpb24oYil7cmV0dXJuIWEucmlnaHRvZmZvbGQoYix7dGhyZXNob2xkOjB9KX0sXCJpbi12aWV3cG9ydFwiOmZ1bmN0aW9uKGIpe3JldHVybiBhLmludmlld3BvcnQoYix7dGhyZXNob2xkOjB9KX0sXCJhYm92ZS10aGUtZm9sZFwiOmZ1bmN0aW9uKGIpe3JldHVybiFhLmJlbG93dGhlZm9sZChiLHt0aHJlc2hvbGQ6MH0pfSxcInJpZ2h0LW9mLWZvbGRcIjpmdW5jdGlvbihiKXtyZXR1cm4gYS5yaWdodG9mZm9sZChiLHt0aHJlc2hvbGQ6MH0pfSxcImxlZnQtb2YtZm9sZFwiOmZ1bmN0aW9uKGIpe3JldHVybiFhLnJpZ2h0b2Zmb2xkKGIse3RocmVzaG9sZDowfSl9fSl9KGpRdWVyeSx3aW5kb3csZG9jdW1lbnQpO2RvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJET01Db250ZW50TG9hZGVkXCIsZnVuY3Rpb24oYyl7dmFyIGI9W10uc2xpY2UuY2FsbChkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmxhenkgPiBzb3VyY2VcIikpO2lmKFwiSW50ZXJzZWN0aW9uT2JzZXJ2ZXJcImluIHdpbmRvdyYmXCJJbnRlcnNlY3Rpb25PYnNlcnZlckVudHJ5XCJpbiB3aW5kb3cpe2xldCBkPW5ldyBJbnRlcnNlY3Rpb25PYnNlcnZlcihmdW5jdGlvbihhLGIpe2EuZm9yRWFjaChmdW5jdGlvbihiKXtpZihiLmlzSW50ZXJzZWN0aW5nKXtsZXQgYT1iLnRhcmdldDthLnNyY3NldD1hLmRhdGFzZXQuc3Jjc2V0LGEubmV4dEVsZW1lbnRTaWJsaW5nLnNyY3NldD1hLmRhdGFzZXQuc3Jjc2V0LGEubmV4dEVsZW1lbnRTaWJsaW5nLmNsYXNzTGlzdC5hZGQoXCJmYWRlLWluXCIpLGEucGFyZW50RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwibGF6eVwiKSxkLnVub2JzZXJ2ZShhKX19KX0pO2IuZm9yRWFjaChmdW5jdGlvbihhKXtkLm9ic2VydmUoYSl9KX1lbHNle2xldCBlPSExLGE9ZnVuY3Rpb24oKXshMT09PWUmJihlPSEwLHNldFRpbWVvdXQoZnVuY3Rpb24oKXtiLmZvckVhY2goZnVuY3Rpb24oYyl7Yy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS50b3A8PXdpbmRvdy5pbm5lckhlaWdodCYmYy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5ib3R0b20+PTAmJlwibm9uZVwiIT09Z2V0Q29tcHV0ZWRTdHlsZShjKS5kaXNwbGF5JiYoYy5zcmNzZXQ9Yy5kYXRhc2V0LnNyY3NldCxjLm5leHRFbGVtZW50U2libGluZy5zcmM9Yy5kYXRhc2V0LnNyY3NldCxjLm5leHRFbGVtZW50U2libGluZy5jbGFzc0xpc3QuYWRkKFwiZmFkZS1pblwiKSxjLnBhcmVudEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcImxhenlcIiksMD09PShiPWIuZmlsdGVyKGZ1bmN0aW9uKGEpe3JldHVybiBhIT09Y30pKS5sZW5ndGgmJihkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwic2Nyb2xsXCIsYSksd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJyZXNpemVcIixhKSx3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm9yaWVudGF0aW9uY2hhbmdlXCIsYSkpKX0pLGU9ITF9LDIwMCkpfTtkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwic2Nyb2xsXCIsYSksd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJyZXNpemVcIixhKSx3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcIm9yaWVudGF0aW9uY2hhbmdlXCIsYSl9fSk7ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIkRPTUNvbnRlbnRMb2FkZWRcIixmdW5jdGlvbihlKXt2YXIgdD1bXS5zbGljZS5jYWxsKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIubGF6eSA+IHNvdXJjZVwiKSk7aWYoXCJJbnRlcnNlY3Rpb25PYnNlcnZlclwiaW4gd2luZG93JiZcIkludGVyc2VjdGlvbk9ic2VydmVyRW50cnlcImluIHdpbmRvdyl7bGV0IG49bmV3IEludGVyc2VjdGlvbk9ic2VydmVyKGZ1bmN0aW9uKGUsdCl7ZS5mb3JFYWNoKGZ1bmN0aW9uKGUpe2lmKGUuaXNJbnRlcnNlY3Rpbmcpe2xldCB0PWUudGFyZ2V0O3Quc3Jjc2V0PXQuZGF0YXNldC5zcmNzZXQsdC5uZXh0RWxlbWVudFNpYmxpbmcuc3Jjc2V0PXQuZGF0YXNldC5zcmNzZXQsdC5uZXh0RWxlbWVudFNpYmxpbmcuY2xhc3NMaXN0LmFkZChcImZhZGUtaW5cIiksdC5wYXJlbnRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJsYXp5XCIpLG4udW5vYnNlcnZlKHQpfX0pfSk7dC5mb3JFYWNoKGZ1bmN0aW9uKGUpe24ub2JzZXJ2ZShlKX0pfWVsc2V7bGV0IHM9ITEsaT1mdW5jdGlvbigpeyExPT09cyYmKHM9ITAsc2V0VGltZW91dChmdW5jdGlvbigpe3QuZm9yRWFjaChmdW5jdGlvbihlKXtlLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLnRvcDw9d2luZG93LmlubmVySGVpZ2h0JiZlLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmJvdHRvbT49MCYmXCJub25lXCIhPT1nZXRDb21wdXRlZFN0eWxlKGUpLmRpc3BsYXkmJihlLnNyY3NldD1lLmRhdGFzZXQuc3Jjc2V0LGUubmV4dEVsZW1lbnRTaWJsaW5nLnNyYz1lLmRhdGFzZXQuc3Jjc2V0LGUubmV4dEVsZW1lbnRTaWJsaW5nLmNsYXNzTGlzdC5hZGQoXCJmYWRlLWluXCIpLGUucGFyZW50RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwibGF6eVwiKSwwPT09KHQ9dC5maWx0ZXIoZnVuY3Rpb24odCl7cmV0dXJuIHQhPT1lfSkpLmxlbmd0aCYmKGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJzY3JvbGxcIixpKSx3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInJlc2l6ZVwiLGkpLHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwib3JpZW50YXRpb25jaGFuZ2VcIixpKSkpfSkscz0hMX0sMjAwKSl9O2RvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJzY3JvbGxcIixpKSx3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInJlc2l6ZVwiLGkpLHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwib3JpZW50YXRpb25jaGFuZ2VcIixpKX19KTtcclxuXHJcblxyXG4kKCcuanMtaGFtYnVyZ2VyJykuY2xpY2soKCkgPT4ge1xyXG4gICAgJCgnYm9keScpLnRvZ2dsZUNsYXNzKCdpcy1vcGVuJyk7XHJcbiAgICAkKCdib2R5JykudG9nZ2xlQ2xhc3MoJ25vLXNjcm9sbCcpO1xyXG59KTtcclxuXHJcblxyXG4kKCcubmF2aWdhdGlvbl9fZHJvcC1idG4gPiBzcGFuJykuY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgaWYoJCh3aW5kb3cpLndpZHRoKCkgPCA5OTIpe1xyXG4gICAgICAgICQodGhpcykucGFyZW50KCkudG9nZ2xlQ2xhc3MoJ2Ryb3AtaXMtb3BlbicpO1xyXG4gICAgfVxyXG59KTtcclxuXHJcbiQod2luZG93KS5iaW5kKCdsb2FkJywgZnVuY3Rpb24oKSB7XHJcbiAgICAkKCcubmF2aWdhdGlvbl9fbGlzdCBsaSBhJykuY2xpY2soZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgICAgIGlmKCAkKCAnYm9keScgKS5oYXNDbGFzcyggJ2lzLW9wZW4gbm8tc2Nyb2xsJyApICkge1xyXG4gICAgICAgICAgICAkKCcuanMtaGFtYnVyZ2VyJykuY2xpY2soKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxufSk7XHJcblxyXG5cclxuXHJcbi8qKlxyXG4gKiBsYXp5bG9hZCBpbWFnZXNcclxuICovXHJcblxyXG4kKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpIHtcclxuICAgIHZhciBsYXp5bG9hZEltYWdlcztcclxuXHJcbiAgICBpZiAoJ0ludGVyc2VjdGlvbk9ic2VydmVyJyBpbiB3aW5kb3cpIHtcclxuICAgICAgICBsYXp5bG9hZEltYWdlcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5sYXp5Jyk7XHJcbiAgICAgICAgdmFyIGltYWdlT2JzZXJ2ZXIgPSBuZXcgSW50ZXJzZWN0aW9uT2JzZXJ2ZXIoZnVuY3Rpb24oZW50cmllcywgb2JzZXJ2ZXIpIHtcclxuICAgICAgICAgICAgZW50cmllcy5mb3JFYWNoKGZ1bmN0aW9uKGVudHJ5KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZW50cnkuaXNJbnRlcnNlY3RpbmcpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgaW1hZ2UgPSBlbnRyeS50YXJnZXQ7XHJcbiAgICAgICAgICAgICAgICAgICAgaW1hZ2Uuc3JjID0gaW1hZ2UuZGF0YXNldC5zcmM7XHJcbiAgICAgICAgICAgICAgICAgICAgaW1hZ2UuY2xhc3NMaXN0LnJlbW92ZSgnbGF6eScpO1xyXG4gICAgICAgICAgICAgICAgICAgIGltYWdlT2JzZXJ2ZXIudW5vYnNlcnZlKGltYWdlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGxhenlsb2FkSW1hZ2VzLmZvckVhY2goZnVuY3Rpb24oaW1hZ2UpIHtcclxuICAgICAgICAgICAgaW1hZ2VPYnNlcnZlci5vYnNlcnZlKGltYWdlKTtcclxuICAgICAgICB9KTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdmFyIGxhenlsb2FkVGhyb3R0bGVUaW1lb3V0O1xyXG4gICAgICAgIGxhenlsb2FkSW1hZ2VzID0gJCgnLmxhenknKTtcclxuXHJcbiAgICAgICAgZnVuY3Rpb24gbGF6eWxvYWQgKCkge1xyXG4gICAgICAgICAgICBpZihsYXp5bG9hZFRocm90dGxlVGltZW91dCkge1xyXG4gICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KGxhenlsb2FkVGhyb3R0bGVUaW1lb3V0KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgbGF6eWxvYWRUaHJvdHRsZVRpbWVvdXQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHNjcm9sbFRvcCA9ICQod2luZG93KS5zY3JvbGxUb3AoKTtcclxuICAgICAgICAgICAgICAgIGxhenlsb2FkSW1hZ2VzLmVhY2goZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGVsID0gJCh0aGlzKTtcclxuICAgICAgICAgICAgICAgICAgICBpZihlbC5vZmZzZXQoKS50b3AgLSBzY3JvbGxUb3AgPCB3aW5kb3cuaW5uZXJIZWlnaHQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHVybCA9IGVsLmF0dHIoJ2RhdGEtc3JjJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsLmF0dHIoJ3NyYycsIHVybCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsLnJlbW92ZUNsYXNzKCdsYXp5Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxhenlsb2FkSW1hZ2VzID0gJCgnLmxhenknKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIGlmKGxhenlsb2FkSW1hZ2VzLmxlbmd0aCA9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJChkb2N1bWVudCkub2ZmKCdzY3JvbGwnKTtcclxuICAgICAgICAgICAgICAgICAgICAkKHdpbmRvdykub2ZmKCdyZXNpemUnKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSwgMjApO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgJChkb2N1bWVudCkub24oJ3Njcm9sbCcsIGxhenlsb2FkKTtcclxuICAgICAgICAkKHdpbmRvdykub24oJ3Jlc2l6ZScsIGxhenlsb2FkKTtcclxuICAgIH1cclxufSk7Il19
