"use strict";function _typeof(t){"@babel/helpers - typeof";return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function fadeInPage(){if(window.AnimationEvent){document.querySelector("main").classList.add("fade-out")}}!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t("object"===("undefined"==typeof exports?"undefined":_typeof(exports))?require("jquery"):jQuery)}(function(t){function e(t,e){return t.toFixed(e.decimals)}var o=function e(o,n){this.$element=t(o),this.options=t.extend({},e.DEFAULTS,this.dataOptions(),n),this.init()};o.DEFAULTS={from:0,to:0,speed:1e3,refreshInterval:100,decimals:0,formatter:e,onUpdate:null,onComplete:null},o.prototype.init=function(){this.value=this.options.from,this.loops=Math.ceil(this.options.speed/this.options.refreshInterval),this.loopCount=0,this.increment=(this.options.to-this.options.from)/this.loops},o.prototype.dataOptions=function(){var t={from:this.$element.data("from"),to:this.$element.data("to"),speed:this.$element.data("speed"),refreshInterval:this.$element.data("refresh-interval"),decimals:this.$element.data("decimals")},e=Object.keys(t);for(var o in e){var n=e[o];void 0===t[n]&&delete t[n]}return t},o.prototype.update=function(){this.value+=this.increment,this.loopCount++,this.render(),"function"==typeof this.options.onUpdate&&this.options.onUpdate.call(this.$element,this.value),this.loopCount>=this.loops&&(clearInterval(this.interval),this.value=this.options.to,"function"==typeof this.options.onComplete&&this.options.onComplete.call(this.$element,this.value))},o.prototype.render=function(){var t=this.options.formatter.call(this.$element,this.value,this.options);this.$element.text(t)},o.prototype.restart=function(){this.stop(),this.init(),this.start()},o.prototype.start=function(){this.stop(),this.render(),this.interval=setInterval(this.update.bind(this),this.options.refreshInterval)},o.prototype.stop=function(){this.interval&&clearInterval(this.interval)},o.prototype.toggle=function(){this.interval?this.stop():this.start()},t.fn.countTo=function(e){return this.each(function(){var n=t(this),i=n.data("countTo"),r=!i||"object"===_typeof(e),a="object"===_typeof(e)?e:{},s="string"==typeof e?e:"start";r&&(i&&i.stop(),n.data("countTo",i=new o(this,a))),i[s].call(i)})}}),function(t,e,o,n){var i=t(e);t.fn.lazyload=function(r){function a(){var e=0;l.each(function(){var o=t(this);if(!f.skip_invisible||o.is(":visible"))if(t.abovethetop(this,f)||t.leftofbegin(this,f));else if(t.belowthefold(this,f)||t.rightoffold(this,f)){if(++e>f.failure_limit)return!1}else o.trigger("appear"),e=0})}var s,l=this,f={threshold:0,failure_limit:0,event:"scroll",effect:"show",container:e,data_attribute:"original",skip_invisible:!0,appear:null,load:null,placeholder:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC"};return r&&(n!==r.failurelimit&&(r.failure_limit=r.failurelimit,delete r.failurelimit),n!==r.effectspeed&&(r.effect_speed=r.effectspeed,delete r.effectspeed),t.extend(f,r)),s=f.container===n||f.container===e?i:t(f.container),0===f.event.indexOf("scroll")&&s.bind(f.event,function(){return a()}),this.each(function(){var e=this,o=t(e);e.loaded=!1,(o.attr("src")===n||!1===o.attr("src"))&&o.is("img")&&o.attr("src",f.placeholder),o.one("appear",function(){if(!this.loaded){if(f.appear){var n=l.length;f.appear.call(e,n,f)}t("<img />").bind("load",function(){var n=o.attr("data-"+f.data_attribute);o.hide(),o.is("img")?o.attr("src",n):o.css("background-image","url('"+n+"')"),o[f.effect](f.effect_speed),e.loaded=!0;var i=t.grep(l,function(t){return!t.loaded});if(l=t(i),f.load){var r=l.length;f.load.call(e,r,f)}}).attr("src",o.attr("data-"+f.data_attribute))}}),0!==f.event.indexOf("scroll")&&o.bind(f.event,function(){e.loaded||o.trigger("appear")})}),i.bind("resize",function(){a()}),/(?:iphone|ipod|ipad).*os 5/gi.test(navigator.appVersion)&&i.bind("pageshow",function(e){e.originalEvent&&e.originalEvent.persisted&&l.each(function(){t(this).trigger("appear")})}),t(o).ready(function(){a()}),this},t.belowthefold=function(o,r){return(r.container===n||r.container===e?(e.innerHeight?e.innerHeight:i.height())+i.scrollTop():t(r.container).offset().top+t(r.container).height())<=t(o).offset().top-r.threshold},t.rightoffold=function(o,r){return(r.container===n||r.container===e?i.width()+i.scrollLeft():t(r.container).offset().left+t(r.container).width())<=t(o).offset().left-r.threshold},t.abovethetop=function(o,r){return(r.container===n||r.container===e?i.scrollTop():t(r.container).offset().top)>=t(o).offset().top+r.threshold+t(o).height()},t.leftofbegin=function(o,r){return(r.container===n||r.container===e?i.scrollLeft():t(r.container).offset().left)>=t(o).offset().left+r.threshold+t(o).width()},t.inviewport=function(e,o){return!(t.rightoffold(e,o)||t.leftofbegin(e,o)||t.belowthefold(e,o)||t.abovethetop(e,o))},t.extend(t.expr[":"],{"below-the-fold":function(e){return t.belowthefold(e,{threshold:0})},"above-the-top":function(e){return!t.belowthefold(e,{threshold:0})},"right-of-screen":function(e){return t.rightoffold(e,{threshold:0})},"left-of-screen":function(e){return!t.rightoffold(e,{threshold:0})},"in-viewport":function(e){return t.inviewport(e,{threshold:0})},"above-the-fold":function(e){return!t.belowthefold(e,{threshold:0})},"right-of-fold":function(e){return t.rightoffold(e,{threshold:0})},"left-of-fold":function(e){return!t.rightoffold(e,{threshold:0})}})}(jQuery,window,document),$(".js-hamburger").click(function(){$("body").toggleClass("is-open"),$("body").toggleClass("no-scroll")}),$(".navigation__drop-btn > span").click(function(){$(window).width()<992&&$(this).parent().toggleClass("drop-is-open")}),$(window).bind("load",function(){$(".navigation__list li a").click(function(){$("body").hasClass("is-open no-scroll")&&$(".js-hamburger").click()})}),document.addEventListener("DOMContentLoaded",function(){if(window.AnimationEvent){document.querySelectorAll(".navigation__list a").forEach(function(t){t.addEventListener("click",function(t){fadeInPage();var e=document.querySelector("main"),o=t.currentTarget,n=function t(){window.location=o.href,e.removeEventListener("animationend",t)};e.addEventListener("animationend",n),t.preventDefault()})})}}),window.addEventListener("pageshow",function(t){if(t.persisted){document.querySelector("main").classList.remove("fade-in")}});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsiZmFkZUluUGFnZSIsIndpbmRvdyIsIkFuaW1hdGlvbkV2ZW50IiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiY2xhc3NMaXN0IiwiYWRkIiwiZmFjdG9yeSIsImRlZmluZSIsImFtZCIsImV4cG9ydHMiLCJfdHlwZW9mIiwicmVxdWlyZSIsImpRdWVyeSIsIiQiLCJmb3JtYXR0ZXIiLCJ2YWx1ZSIsIm9wdGlvbnMiLCJ0b0ZpeGVkIiwiZGVjaW1hbHMiLCJDb3VudFRvIiwiZWxlbWVudCIsInRoaXMiLCIkZWxlbWVudCIsImV4dGVuZCIsIkRFRkFVTFRTIiwiZGF0YU9wdGlvbnMiLCJpbml0IiwiZnJvbSIsInRvIiwic3BlZWQiLCJyZWZyZXNoSW50ZXJ2YWwiLCJvblVwZGF0ZSIsIm9uQ29tcGxldGUiLCJwcm90b3R5cGUiLCJsb29wcyIsIk1hdGgiLCJjZWlsIiwibG9vcENvdW50IiwiaW5jcmVtZW50IiwiZGF0YSIsImtleXMiLCJPYmplY3QiLCJpIiwia2V5IiwidXBkYXRlIiwicmVuZGVyIiwiY2FsbCIsImNsZWFySW50ZXJ2YWwiLCJpbnRlcnZhbCIsImZvcm1hdHRlZFZhbHVlIiwidGV4dCIsInJlc3RhcnQiLCJzdG9wIiwic3RhcnQiLCJzZXRJbnRlcnZhbCIsImJpbmQiLCJ0b2dnbGUiLCJmbiIsImNvdW50VG8iLCJvcHRpb24iLCJlYWNoIiwiJHRoaXMiLCJtZXRob2QiLCJhIiwiYiIsImMiLCJkIiwiZSIsImxhenlsb2FkIiwiZiIsImciLCJqIiwic2tpcF9pbnZpc2libGUiLCJpcyIsImFib3ZldGhldG9wIiwibGVmdG9mYmVnaW4iLCJiZWxvd3RoZWZvbGQiLCJyaWdodG9mZm9sZCIsImZhaWx1cmVfbGltaXQiLCJ0cmlnZ2VyIiwiaCIsInRocmVzaG9sZCIsImV2ZW50IiwiZWZmZWN0IiwiY29udGFpbmVyIiwiZGF0YV9hdHRyaWJ1dGUiLCJhcHBlYXIiLCJsb2FkIiwicGxhY2Vob2xkZXIiLCJmYWlsdXJlbGltaXQiLCJlZmZlY3RzcGVlZCIsImVmZmVjdF9zcGVlZCIsImluZGV4T2YiLCJsb2FkZWQiLCJhdHRyIiwib25lIiwibGVuZ3RoIiwiaGlkZSIsImNzcyIsImdyZXAiLCJ0ZXN0IiwibmF2aWdhdG9yIiwiYXBwVmVyc2lvbiIsIm9yaWdpbmFsRXZlbnQiLCJwZXJzaXN0ZWQiLCJyZWFkeSIsImlubmVySGVpZ2h0IiwiaGVpZ2h0Iiwic2Nyb2xsVG9wIiwib2Zmc2V0IiwidG9wIiwid2lkdGgiLCJzY3JvbGxMZWZ0IiwibGVmdCIsImludmlld3BvcnQiLCJleHByIiwiYmVsb3ctdGhlLWZvbGQiLCJhYm92ZS10aGUtdG9wIiwicmlnaHQtb2Ytc2NyZWVuIiwibGVmdC1vZi1zY3JlZW4iLCJpbi12aWV3cG9ydCIsImFib3ZlLXRoZS1mb2xkIiwicmlnaHQtb2YtZm9sZCIsImxlZnQtb2YtZm9sZCIsImNsaWNrIiwidG9nZ2xlQ2xhc3MiLCJwYXJlbnQiLCJoYXNDbGFzcyIsImFkZEV2ZW50TGlzdGVuZXIiLCJxdWVyeVNlbGVjdG9yQWxsIiwiZm9yRWFjaCIsImZhZGVyIiwiYW5jaG9yIiwiY3VycmVudFRhcmdldCIsImxpc3RlbmVyIiwibG9jYXRpb24iLCJocmVmIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsInByZXZlbnREZWZhdWx0IiwicmVtb3ZlIl0sIm1hcHBpbmdzIjoid1JBNEpBLFFBQVNBLGNBQ0wsR0FBS0MsT0FBT0MsZUFBWixDQUNZQyxTQUFTQyxjQUFjLFFBQzdCQyxVQUFVQyxJQUFJLGNBOUp2QixTQUFVQyxHQUNlLGtCQUFYQyxTQUF5QkEsT0FBT0MsSUFFdkNELFFBQVEsVUFBV0QsR0FHbkJBLEVBRjBCLFlBQUwsbUJBQVBHLFNBQU8sWUFBQUMsUUFBUEQsVUFFTkUsUUFBUSxVQUdSQyxTQUVkLFNBQVVDLEdBa0dSLFFBQVNDLEdBQVVDLEVBQU9DLEdBQ3RCLE1BQU9ELEdBQU1FLFFBQVFELEVBQVFFLFVBbEdqQyxHQUFJQyxHQUFVLFFBQVZBLEdBQW9CQyxFQUFTSixH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LEdBQU9BLEVBQUVzRixpQkFBaUIsUUFBUyxTQUFTOUMsR0FDMURuRixZQUNBLElBQU1vSSxHQUFRakksU0FBU0MsY0FBYyxRQUNqQ2lJLEVBQVNsRCxFQUFNbUQsY0FFYkMsRUFBVyxRQUFYQSxLQUNGdEksT0FBT3VJLFNBQVdILEVBQU9JLEtBQ3pCTCxFQUFNTSxvQkFBb0IsZUFBZ0JILEdBRzlDSCxHQUFNSCxpQkFBaUIsZUFBZ0JNLEdBRXZDcEQsRUFBTXdELHdCQU9kMUksT0FBT2dJLGlCQUFpQixXQUFZLFNBQVU5QyxHQUMxQyxHQUFLQSxFQUFNc0IsVUFBWCxDQUdZdEcsU0FBU0MsY0FBYyxRQUM3QkMsVUFBVXVJLE9BQU8iLCJmaWxlIjoianMvbWluL21haW4ubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiXG4oZnVuY3Rpb24gKGZhY3RvcnkpIHtcbiAgICBpZiAodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKSB7XG4gICAgICAgIC8vIEFNRFxuICAgICAgICBkZWZpbmUoWydqcXVlcnknXSwgZmFjdG9yeSk7XG4gICAgfSBlbHNlIGlmICh0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgLy8gQ29tbW9uSlNcbiAgICAgICAgZmFjdG9yeShyZXF1aXJlKCdqcXVlcnknKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgLy8gQnJvd3NlciBnbG9iYWxzXG4gICAgICAgIGZhY3RvcnkoalF1ZXJ5KTtcbiAgICB9XG59KGZ1bmN0aW9uICgkKSB7XG4gICAgdmFyIENvdW50VG8gPSBmdW5jdGlvbiAoZWxlbWVudCwgb3B0aW9ucykge1xuICAgICAgICB0aGlzLiRlbGVtZW50ID0gJChlbGVtZW50KTtcbiAgICAgICAgdGhpcy5vcHRpb25zICA9ICQuZXh0ZW5kKHt9LCBDb3VudFRvLkRFRkFVTFRTLCB0aGlzLmRhdGFPcHRpb25zKCksIG9wdGlvbnMpO1xuICAgICAgICB0aGlzLmluaXQoKTtcbiAgICB9O1xuXG4gICAgQ291bnRUby5ERUZBVUxUUyA9IHtcbiAgICAgICAgZnJvbTogMCwgICAgICAgICAgICAgICAvLyB0aGUgbnVtYmVyIHRoZSBlbGVtZW50IHNob3VsZCBzdGFydCBhdFxuICAgICAgICB0bzogMCwgICAgICAgICAgICAgICAgIC8vIHRoZSBudW1iZXIgdGhlIGVsZW1lbnQgc2hvdWxkIGVuZCBhdFxuICAgICAgICBzcGVlZDogMTAwMCwgICAgICAgICAgIC8vIGhvdyBsb25nIGl0IHNob3VsZCB0YWtlIHRvIGNvdW50IGJldHdlZW4gdGhlIHRhcmdldCBudW1iZXJzXG4gICAgICAgIHJlZnJlc2hJbnRlcnZhbDogMTAwLCAgLy8gaG93IG9mdGVuIHRoZSBlbGVtZW50IHNob3VsZCBiZSB1cGRhdGVkXG4gICAgICAgIGRlY2ltYWxzOiAwLCAgICAgICAgICAgLy8gdGhlIG51bWJlciBvZiBkZWNpbWFsIHBsYWNlcyB0byBzaG93XG4gICAgICAgIGZvcm1hdHRlcjogZm9ybWF0dGVyLCAgLy8gaGFuZGxlciBmb3IgZm9ybWF0dGluZyB0aGUgdmFsdWUgYmVmb3JlIHJlbmRlcmluZ1xuICAgICAgICBvblVwZGF0ZTogbnVsbCwgICAgICAgIC8vIGNhbGxiYWNrIG1ldGhvZCBmb3IgZXZlcnkgdGltZSB0aGUgZWxlbWVudCBpcyB1cGRhdGVkXG4gICAgICAgIG9uQ29tcGxldGU6IG51bGwgICAgICAgLy8gY2FsbGJhY2sgbWV0aG9kIGZvciB3aGVuIHRoZSBlbGVtZW50IGZpbmlzaGVzIHVwZGF0aW5nXG4gICAgfTtcblxuICAgIENvdW50VG8ucHJvdG90eXBlLmluaXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMudmFsdWUgICAgID0gdGhpcy5vcHRpb25zLmZyb207XG4gICAgICAgIHRoaXMubG9vcHMgICAgID0gTWF0aC5jZWlsKHRoaXMub3B0aW9ucy5zcGVlZCAvIHRoaXMub3B0aW9ucy5yZWZyZXNoSW50ZXJ2YWwpO1xuICAgICAgICB0aGlzLmxvb3BDb3VudCA9IDA7XG4gICAgICAgIHRoaXMuaW5jcmVtZW50ID0gKHRoaXMub3B0aW9ucy50byAtIHRoaXMub3B0aW9ucy5mcm9tKSAvIHRoaXMubG9vcHM7XG4gICAgfTtcblxuICAgIENvdW50VG8ucHJvdG90eXBlLmRhdGFPcHRpb25zID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgb3B0aW9ucyA9IHtcbiAgICAgICAgICAgIGZyb206ICAgICAgICAgICAgdGhpcy4kZWxlbWVudC5kYXRhKCdmcm9tJyksXG4gICAgICAgICAgICB0bzogICAgICAgICAgICAgIHRoaXMuJGVsZW1lbnQuZGF0YSgndG8nKSxcbiAgICAgICAgICAgIHNwZWVkOiAgICAgICAgICAgdGhpcy4kZWxlbWVudC5kYXRhKCdzcGVlZCcpLFxuICAgICAgICAgICAgcmVmcmVzaEludGVydmFsOiB0aGlzLiRlbGVtZW50LmRhdGEoJ3JlZnJlc2gtaW50ZXJ2YWwnKSxcbiAgICAgICAgICAgIGRlY2ltYWxzOiAgICAgICAgdGhpcy4kZWxlbWVudC5kYXRhKCdkZWNpbWFscycpXG4gICAgICAgIH07XG5cbiAgICAgICAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhvcHRpb25zKTtcblxuICAgICAgICBmb3IgKHZhciBpIGluIGtleXMpIHtcbiAgICAgICAgICAgIHZhciBrZXkgPSBrZXlzW2ldO1xuXG4gICAgICAgICAgICBpZiAodHlwZW9mKG9wdGlvbnNba2V5XSkgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAgICAgZGVsZXRlIG9wdGlvbnNba2V5XTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBvcHRpb25zO1xuICAgIH07XG5cbiAgICBDb3VudFRvLnByb3RvdHlwZS51cGRhdGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMudmFsdWUgKz0gdGhpcy5pbmNyZW1lbnQ7XG4gICAgICAgIHRoaXMubG9vcENvdW50Kys7XG5cbiAgICAgICAgdGhpcy5yZW5kZXIoKTtcblxuICAgICAgICBpZiAodHlwZW9mKHRoaXMub3B0aW9ucy5vblVwZGF0ZSkgPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgdGhpcy5vcHRpb25zLm9uVXBkYXRlLmNhbGwodGhpcy4kZWxlbWVudCwgdGhpcy52YWx1ZSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5sb29wQ291bnQgPj0gdGhpcy5sb29wcykge1xuICAgICAgICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLmludGVydmFsKTtcbiAgICAgICAgICAgIHRoaXMudmFsdWUgPSB0aGlzLm9wdGlvbnMudG87XG5cbiAgICAgICAgICAgIGlmICh0eXBlb2YodGhpcy5vcHRpb25zLm9uQ29tcGxldGUpID09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm9wdGlvbnMub25Db21wbGV0ZS5jYWxsKHRoaXMuJGVsZW1lbnQsIHRoaXMudmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcblxuICAgIENvdW50VG8ucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGZvcm1hdHRlZFZhbHVlID0gdGhpcy5vcHRpb25zLmZvcm1hdHRlci5jYWxsKHRoaXMuJGVsZW1lbnQsIHRoaXMudmFsdWUsIHRoaXMub3B0aW9ucyk7XG4gICAgICAgIHRoaXMuJGVsZW1lbnQudGV4dChmb3JtYXR0ZWRWYWx1ZSk7XG4gICAgfTtcblxuICAgIENvdW50VG8ucHJvdG90eXBlLnJlc3RhcnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuc3RvcCgpO1xuICAgICAgICB0aGlzLmluaXQoKTtcbiAgICAgICAgdGhpcy5zdGFydCgpO1xuICAgIH07XG5cbiAgICBDb3VudFRvLnByb3RvdHlwZS5zdGFydCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5zdG9wKCk7XG4gICAgICAgIHRoaXMucmVuZGVyKCk7XG4gICAgICAgIHRoaXMuaW50ZXJ2YWwgPSBzZXRJbnRlcnZhbCh0aGlzLnVwZGF0ZS5iaW5kKHRoaXMpLCB0aGlzLm9wdGlvbnMucmVmcmVzaEludGVydmFsKTtcbiAgICB9O1xuXG4gICAgQ291bnRUby5wcm90b3R5cGUuc3RvcCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHRoaXMuaW50ZXJ2YWwpIHtcbiAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy5pbnRlcnZhbCk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgQ291bnRUby5wcm90b3R5cGUudG9nZ2xlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy5pbnRlcnZhbCkge1xuICAgICAgICAgICAgdGhpcy5zdG9wKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnN0YXJ0KCk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgZnVuY3Rpb24gZm9ybWF0dGVyKHZhbHVlLCBvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiB2YWx1ZS50b0ZpeGVkKG9wdGlvbnMuZGVjaW1hbHMpO1xuICAgIH1cblxuICAgICQuZm4uY291bnRUbyA9IGZ1bmN0aW9uIChvcHRpb24pIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgJHRoaXMgICA9ICQodGhpcyk7XG4gICAgICAgICAgICB2YXIgZGF0YSAgICA9ICR0aGlzLmRhdGEoJ2NvdW50VG8nKTtcbiAgICAgICAgICAgIHZhciBpbml0ICAgID0gIWRhdGEgfHwgdHlwZW9mKG9wdGlvbikgPT09ICdvYmplY3QnO1xuICAgICAgICAgICAgdmFyIG9wdGlvbnMgPSB0eXBlb2Yob3B0aW9uKSA9PT0gJ29iamVjdCcgPyBvcHRpb24gOiB7fTtcbiAgICAgICAgICAgIHZhciBtZXRob2QgID0gdHlwZW9mKG9wdGlvbikgPT09ICdzdHJpbmcnID8gb3B0aW9uIDogJ3N0YXJ0JztcblxuICAgICAgICAgICAgaWYgKGluaXQpIHtcbiAgICAgICAgICAgICAgICBpZiAoZGF0YSkgZGF0YS5zdG9wKCk7XG4gICAgICAgICAgICAgICAgJHRoaXMuZGF0YSgnY291bnRUbycsIGRhdGEgPSBuZXcgQ291bnRUbyh0aGlzLCBvcHRpb25zKSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGRhdGFbbWV0aG9kXS5jYWxsKGRhdGEpO1xuICAgICAgICB9KTtcbiAgICB9O1xufSkpO1xuIWZ1bmN0aW9uKGEsYixjLGQpe3ZhciBlPWEoYik7YS5mbi5sYXp5bG9hZD1mdW5jdGlvbihmKXtmdW5jdGlvbiBnKCl7dmFyIGI9MDtpLmVhY2goZnVuY3Rpb24oKXt2YXIgYz1hKHRoaXMpO2lmKCFqLnNraXBfaW52aXNpYmxlfHxjLmlzKFwiOnZpc2libGVcIikpaWYoYS5hYm92ZXRoZXRvcCh0aGlzLGopfHxhLmxlZnRvZmJlZ2luKHRoaXMsaikpO2Vsc2UgaWYoYS5iZWxvd3RoZWZvbGQodGhpcyxqKXx8YS5yaWdodG9mZm9sZCh0aGlzLGopKXtpZigrK2I+ai5mYWlsdXJlX2xpbWl0KXJldHVybiExfWVsc2UgYy50cmlnZ2VyKFwiYXBwZWFyXCIpLGI9MH0pfXZhciBoLGk9dGhpcyxqPXt0aHJlc2hvbGQ6MCxmYWlsdXJlX2xpbWl0OjAsZXZlbnQ6XCJzY3JvbGxcIixlZmZlY3Q6XCJzaG93XCIsY29udGFpbmVyOmIsZGF0YV9hdHRyaWJ1dGU6XCJvcmlnaW5hbFwiLHNraXBfaW52aXNpYmxlOiEwLGFwcGVhcjpudWxsLGxvYWQ6bnVsbCxwbGFjZWhvbGRlcjpcImRhdGE6aW1hZ2UvcG5nO2Jhc2U2NCxpVkJPUncwS0dnb0FBQUFOU1VoRVVnQUFBQUVBQUFBQkNBWUFBQUFmRmNTSkFBQUFBWE5TUjBJQXJzNGM2UUFBQUFSblFVMUJBQUN4and2OFlRVUFBQUFKY0VoWmN3QUFEc1FBQUE3RUFaVXJEaHNBQUFBTlNVUkJWQmhYWXpoOCtQQi9BQWZmQTBuTlB1Q0xBQUFBQUVsRlRrU3VRbUNDXCJ9O3JldHVybiBmJiYoZCE9PWYuZmFpbHVyZWxpbWl0JiYoZi5mYWlsdXJlX2xpbWl0PWYuZmFpbHVyZWxpbWl0LGRlbGV0ZSBmLmZhaWx1cmVsaW1pdCksZCE9PWYuZWZmZWN0c3BlZWQmJihmLmVmZmVjdF9zcGVlZD1mLmVmZmVjdHNwZWVkLGRlbGV0ZSBmLmVmZmVjdHNwZWVkKSxhLmV4dGVuZChqLGYpKSxoPWouY29udGFpbmVyPT09ZHx8ai5jb250YWluZXI9PT1iP2U6YShqLmNvbnRhaW5lciksMD09PWouZXZlbnQuaW5kZXhPZihcInNjcm9sbFwiKSYmaC5iaW5kKGouZXZlbnQsZnVuY3Rpb24oKXtyZXR1cm4gZygpfSksdGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIGI9dGhpcyxjPWEoYik7Yi5sb2FkZWQ9ITEsKGMuYXR0cihcInNyY1wiKT09PWR8fGMuYXR0cihcInNyY1wiKT09PSExKSYmYy5pcyhcImltZ1wiKSYmYy5hdHRyKFwic3JjXCIsai5wbGFjZWhvbGRlciksYy5vbmUoXCJhcHBlYXJcIixmdW5jdGlvbigpe2lmKCF0aGlzLmxvYWRlZCl7aWYoai5hcHBlYXIpe3ZhciBkPWkubGVuZ3RoO2ouYXBwZWFyLmNhbGwoYixkLGopfWEoXCI8aW1nIC8+XCIpLmJpbmQoXCJsb2FkXCIsZnVuY3Rpb24oKXt2YXIgZD1jLmF0dHIoXCJkYXRhLVwiK2ouZGF0YV9hdHRyaWJ1dGUpO2MuaGlkZSgpLGMuaXMoXCJpbWdcIik/Yy5hdHRyKFwic3JjXCIsZCk6Yy5jc3MoXCJiYWNrZ3JvdW5kLWltYWdlXCIsXCJ1cmwoJ1wiK2QrXCInKVwiKSxjW2ouZWZmZWN0XShqLmVmZmVjdF9zcGVlZCksYi5sb2FkZWQ9ITA7dmFyIGU9YS5ncmVwKGksZnVuY3Rpb24oYSl7cmV0dXJuIWEubG9hZGVkfSk7aWYoaT1hKGUpLGoubG9hZCl7dmFyIGY9aS5sZW5ndGg7ai5sb2FkLmNhbGwoYixmLGopfX0pLmF0dHIoXCJzcmNcIixjLmF0dHIoXCJkYXRhLVwiK2ouZGF0YV9hdHRyaWJ1dGUpKX19KSwwIT09ai5ldmVudC5pbmRleE9mKFwic2Nyb2xsXCIpJiZjLmJpbmQoai5ldmVudCxmdW5jdGlvbigpe2IubG9hZGVkfHxjLnRyaWdnZXIoXCJhcHBlYXJcIil9KX0pLGUuYmluZChcInJlc2l6ZVwiLGZ1bmN0aW9uKCl7ZygpfSksLyg/OmlwaG9uZXxpcG9kfGlwYWQpLipvcyA1L2dpLnRlc3QobmF2aWdhdG9yLmFwcFZlcnNpb24pJiZlLmJpbmQoXCJwYWdlc2hvd1wiLGZ1bmN0aW9uKGIpe2Iub3JpZ2luYWxFdmVudCYmYi5vcmlnaW5hbEV2ZW50LnBlcnNpc3RlZCYmaS5lYWNoKGZ1bmN0aW9uKCl7YSh0aGlzKS50cmlnZ2VyKFwiYXBwZWFyXCIpfSl9KSxhKGMpLnJlYWR5KGZ1bmN0aW9uKCl7ZygpfSksdGhpc30sYS5iZWxvd3RoZWZvbGQ9ZnVuY3Rpb24oYyxmKXt2YXIgZztyZXR1cm4gZz1mLmNvbnRhaW5lcj09PWR8fGYuY29udGFpbmVyPT09Yj8oYi5pbm5lckhlaWdodD9iLmlubmVySGVpZ2h0OmUuaGVpZ2h0KCkpK2Uuc2Nyb2xsVG9wKCk6YShmLmNvbnRhaW5lcikub2Zmc2V0KCkudG9wK2EoZi5jb250YWluZXIpLmhlaWdodCgpLGc8PWEoYykub2Zmc2V0KCkudG9wLWYudGhyZXNob2xkfSxhLnJpZ2h0b2Zmb2xkPWZ1bmN0aW9uKGMsZil7dmFyIGc7cmV0dXJuIGc9Zi5jb250YWluZXI9PT1kfHxmLmNvbnRhaW5lcj09PWI/ZS53aWR0aCgpK2Uuc2Nyb2xsTGVmdCgpOmEoZi5jb250YWluZXIpLm9mZnNldCgpLmxlZnQrYShmLmNvbnRhaW5lcikud2lkdGgoKSxnPD1hKGMpLm9mZnNldCgpLmxlZnQtZi50aHJlc2hvbGR9LGEuYWJvdmV0aGV0b3A9ZnVuY3Rpb24oYyxmKXt2YXIgZztyZXR1cm4gZz1mLmNvbnRhaW5lcj09PWR8fGYuY29udGFpbmVyPT09Yj9lLnNjcm9sbFRvcCgpOmEoZi5jb250YWluZXIpLm9mZnNldCgpLnRvcCxnPj1hKGMpLm9mZnNldCgpLnRvcCtmLnRocmVzaG9sZCthKGMpLmhlaWdodCgpfSxhLmxlZnRvZmJlZ2luPWZ1bmN0aW9uKGMsZil7dmFyIGc7cmV0dXJuIGc9Zi5jb250YWluZXI9PT1kfHxmLmNvbnRhaW5lcj09PWI/ZS5zY3JvbGxMZWZ0KCk6YShmLmNvbnRhaW5lcikub2Zmc2V0KCkubGVmdCxnPj1hKGMpLm9mZnNldCgpLmxlZnQrZi50aHJlc2hvbGQrYShjKS53aWR0aCgpfSxhLmludmlld3BvcnQ9ZnVuY3Rpb24oYixjKXtyZXR1cm4hKGEucmlnaHRvZmZvbGQoYixjKXx8YS5sZWZ0b2ZiZWdpbihiLGMpfHxhLmJlbG93dGhlZm9sZChiLGMpfHxhLmFib3ZldGhldG9wKGIsYykpfSxhLmV4dGVuZChhLmV4cHJbXCI6XCJdLHtcImJlbG93LXRoZS1mb2xkXCI6ZnVuY3Rpb24oYil7cmV0dXJuIGEuYmVsb3d0aGVmb2xkKGIse3RocmVzaG9sZDowfSl9LFwiYWJvdmUtdGhlLXRvcFwiOmZ1bmN0aW9uKGIpe3JldHVybiFhLmJlbG93dGhlZm9sZChiLHt0aHJlc2hvbGQ6MH0pfSxcInJpZ2h0LW9mLXNjcmVlblwiOmZ1bmN0aW9uKGIpe3JldHVybiBhLnJpZ2h0b2Zmb2xkKGIse3RocmVzaG9sZDowfSl9LFwibGVmdC1vZi1zY3JlZW5cIjpmdW5jdGlvbihiKXtyZXR1cm4hYS5yaWdodG9mZm9sZChiLHt0aHJlc2hvbGQ6MH0pfSxcImluLXZpZXdwb3J0XCI6ZnVuY3Rpb24oYil7cmV0dXJuIGEuaW52aWV3cG9ydChiLHt0aHJlc2hvbGQ6MH0pfSxcImFib3ZlLXRoZS1mb2xkXCI6ZnVuY3Rpb24oYil7cmV0dXJuIWEuYmVsb3d0aGVmb2xkKGIse3RocmVzaG9sZDowfSl9LFwicmlnaHQtb2YtZm9sZFwiOmZ1bmN0aW9uKGIpe3JldHVybiBhLnJpZ2h0b2Zmb2xkKGIse3RocmVzaG9sZDowfSl9LFwibGVmdC1vZi1mb2xkXCI6ZnVuY3Rpb24oYil7cmV0dXJuIWEucmlnaHRvZmZvbGQoYix7dGhyZXNob2xkOjB9KX19KX0oalF1ZXJ5LHdpbmRvdyxkb2N1bWVudCk7XG4kKCcuanMtaGFtYnVyZ2VyJykuY2xpY2soKCkgPT4ge1xuICAgICQoJ2JvZHknKS50b2dnbGVDbGFzcygnaXMtb3BlbicpO1xuICAgICQoJ2JvZHknKS50b2dnbGVDbGFzcygnbm8tc2Nyb2xsJyk7XG59KTtcblxuXG4kKCcubmF2aWdhdGlvbl9fZHJvcC1idG4gPiBzcGFuJykuY2xpY2soZnVuY3Rpb24gKCkge1xuICAgIGlmKCQod2luZG93KS53aWR0aCgpIDwgOTkyKXtcbiAgICAgICAgJCh0aGlzKS5wYXJlbnQoKS50b2dnbGVDbGFzcygnZHJvcC1pcy1vcGVuJyk7XG4gICAgfVxufSk7XG5cbiQod2luZG93KS5iaW5kKCdsb2FkJywgZnVuY3Rpb24oKSB7XG4gICAgJCgnLm5hdmlnYXRpb25fX2xpc3QgbGkgYScpLmNsaWNrKGZ1bmN0aW9uKCkge1xuXG4gICAgICAgIGlmKCAkKCAnYm9keScgKS5oYXNDbGFzcyggJ2lzLW9wZW4gbm8tc2Nyb2xsJyApICkge1xuICAgICAgICAgICAgJCgnLmpzLWhhbWJ1cmdlcicpLmNsaWNrKCk7XG4gICAgICAgIH1cbiAgICB9KTtcbn0pO1xuXG5cblxuXG5mdW5jdGlvbiBmYWRlSW5QYWdlKCkge1xuICAgIGlmICghd2luZG93LkFuaW1hdGlvbkV2ZW50KSB7IHJldHVybjsgfVxuICAgIHZhciBmYWRlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ21haW4nKTtcbiAgICBmYWRlci5jbGFzc0xpc3QuYWRkKCdmYWRlLW91dCcpO1xufVxuXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgZnVuY3Rpb24oKSB7XG4gICAgaWYgKCF3aW5kb3cuQW5pbWF0aW9uRXZlbnQpIHsgcmV0dXJuOyB9XG4gICAgY29uc3QgYW5jaG9ycyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5uYXZpZ2F0aW9uX19saXN0IGEnKTtcbiAgICAgICAgXG4gICAgYW5jaG9ycy5mb3JFYWNoKCAoaSkgPT4ge2kuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbihldmVudCkge1xuICAgICAgICBmYWRlSW5QYWdlKCk7XG4gICAgICAgIGNvbnN0IGZhZGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignbWFpbicpLFxuICAgICAgICAgICAgYW5jaG9yID0gZXZlbnQuY3VycmVudFRhcmdldDtcbiAgICAgICAgICAgIFxuICAgICAgICBjb25zdCBsaXN0ZW5lciA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uID0gYW5jaG9yLmhyZWY7XG4gICAgICAgICAgICBmYWRlci5yZW1vdmVFdmVudExpc3RlbmVyKCdhbmltYXRpb25lbmQnLCBsaXN0ZW5lcik7XG4gICAgICAgIH07XG4gICAgICAgICAgICBcbiAgICAgICAgZmFkZXIuYWRkRXZlbnRMaXN0ZW5lcignYW5pbWF0aW9uZW5kJywgbGlzdGVuZXIpO1xuICAgICAgICAgICAgXG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICBcbiAgICB9KTtcbiAgICB9KTtcbn0pO1xuXG5cbndpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdwYWdlc2hvdycsIGZ1bmN0aW9uIChldmVudCkge1xuICAgIGlmICghZXZlbnQucGVyc2lzdGVkKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdmFyIGZhZGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignbWFpbicpO1xuICAgIGZhZGVyLmNsYXNzTGlzdC5yZW1vdmUoJ2ZhZGUtaW4nKTtcbn0pOyJdfQ==
